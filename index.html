<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta id="_moz_html_fragment">
    <script>
        const requiredInputs = ["userId"];

        function loginClick() {
            const elements = document.getElementById("form1").elements;
            const formData = {};
            if (elements.length > 0) {
                for (let i = 0; i < elements.length; i++) {
                    const ele = elements.item(i);
                    const name = ele.name;
                    const value = ele.value;
                    if (requiredInputs.indexOf(name) > -1 && !value) {
                        const errorField = document.getElementById(name + "-required");
                        errorField.style.display = "block";
                    }
                    formData[name] = value;
                }
            }

            if (formData['type'] === "Patient") {

            } else {
                // Hospital Employee Login service call...
                window.fetch("http://localhost:3004/userLogin", {
                    method: "POST",
                    headers: {
                        "Accept": "application/json",
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(formData)
                }).then(response => response.json())
                    .then(response => {
                        console.log(response);
                        if (response.ROLE_CODE === "DOC") {
                            window.location.href = "file:///C:/Users/GURUDUTT/Desktop/central_hospital/CodeArch/doctor.html?userId=" + formData.userId;
                        } else if (response.ROLE_CODE === "HOS_ADMIN") {
                            window.location.href =
                                "file:///C:/Users/GURUDUTT/Desktop/central_hospital/CodeArch/hospital.html?userId=" + formData.userId;
                        } else if (response.ROLE_CODE === "CENT_ADMIN") {

                        }

                    })
                    .catch(e => console.log("error", e));
            }

        }

        function keyPressed(name) {
            const errorField = document.getElementById(name + "-required");
            errorField.style.display = "none";
        }
    </script>
</head>

<body style="background-image:url(backg.jpg)">
    <div style="text-align: center;">
        <big>
            <big>HOSPITAL MANAGEMENT SYSTEM
                <br>
                <br>
                <br>
            </big>
        </big>
        <form id="form1">
            <center>
                <select name="type">
                    <option value="Patient">Patient</option>
                    <option value="Hospital Employee">Hospital Employee</option>
                </select>
                <table width="40%">
                    <tbody>
                        <tr>
                            <td style="text-align:center;">USERNAME
                                <br>
                            </td>
                            <td>
                                <input name="userId" type="text" placeholder="userId" id="user_id" onkeypress="keyPressed('userId')">
                                <br>
                                <div class="error required-field" id="userId-required" style="display: none;">Please Enter User Id</div>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:center;">PASSWORD
                                <br>
                            </td>
                            <td>
                                <input name="password" type="password" placeholder="password" id="password">
                                <br>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <br>
                <br>
        </form>
        <input value="LOGIN" type="button" onclick="loginClick()">
        <br>
        <br>
        </center>
        <br>
        <iframe width="560" height="315" src="https://en.wikipedia.org/wiki/Health"></iframe>
        <button onclick="window.print()">Print this page</button>
    </div>
</body>

</html>